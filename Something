<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Minecraft 2D â€“ Block Breaking</title>
<style>
body{margin:0;overflow:hidden;background:#87ceeb;font-family:Arial;}
canvas{display:block;margin:auto;background:#87ceeb;border:2px solid #000;}
#topUI{position:fixed;top:10px;left:10px;font-size:20px;color:white;}
</style>
</head>
<body>
<div id="topUI">Health: <span id="health">5</span> | Coins: <span id="coins">0</span> | Stone Blocks: <span id="stone">0</span></div>
<canvas id="game" width="800" height="400"></canvas>

<script>
const canvas=document.getElementById('game'),ctx=canvas.getContext('2d');
const TILE_SIZE=40,WORLD_WIDTH=50,WORLD_HEIGHT=15;

let player={x:3,y:4,w:TILE_SIZE-4,h:TILE_SIZE-4,vx:0,vy:0,grounded:false,speed:0.1,jump:-0.9,facing:1,hasSword:true};
let playerHealth=5,coins=0,stoneBlocks=5;

// World
let world=[];
for(let y=0;y<WORLD_HEIGHT;y++){
  world[y]=[];
  for(let x=0;x<WORLD_WIDTH;x++){
    world[y][x]=y>=WORLD_HEIGHT-3?{type:'stone',durability:3}:null;
  }
}

// Input
const keys={};
window.addEventListener('keydown',e=>{
  keys[e.key]=true; 
  if(e.key==='e')placeBlock();
  if(e.key==='q')breakBlock();
});
window.addEventListener('keyup',e=>{keys[e.key]=false;});

// Player Physics
function updatePlayer(){
  player.vy+=0.5; player.grounded=false;
  let newY=player.y+player.vy;
  if(newY>=WORLD_HEIGHT-3){newY=WORLD_HEIGHT-3;player.vy=0;player.grounded=true;}
  player.y=newY;
  player.vx=0;
  if(keys['a']) player.vx=-player.speed; if(keys['d']) player.vx=player.speed;
  if(keys[' ' ]&& player.grounded){player.vy=player.jump;player.grounded=false;}
  player.x+=player.vx;
}

// Camera
let cameraX=0;
function updateCamera(){cameraX=player.x*TILE_SIZE-canvas.width/2+player.w/2; if(cameraX<0) cameraX=0; if(cameraX>(WORLD_WIDTH*TILE_SIZE-canvas.width)) cameraX=WORLD_WIDTH*TILE_SIZE-canvas.width;}

// Draw
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let y=0;y<WORLD_HEIGHT;y++){
    for(let x=0;x<WORLD_WIDTH;x++){
      if(world[y][x]){ctx.fillStyle='grey';ctx.fillRect(x*TILE_SIZE-cameraX,y*TILE_SIZE,TILE_SIZE,TILE_SIZE);}
    }
  }
  ctx.fillStyle='blue'; ctx.fillRect(player.x*TILE_SIZE-cameraX,player.y*TILE_SIZE,player.w,player.h);
}

// Loop
function loop(){updatePlayer();updateCamera();draw();requestAnimationFrame(loop);}
loop();

// Place block
function placeBlock(){
  if(stoneBlocks<=0) return;
  let targetX=Math.floor(player.x + (player.facing>0?1: -1));
  let targetY=Math.floor(player.y);
  if(targetX<0||targetX>=WORLD_WIDTH||targetY<0||targetY>=WORLD_HEIGHT) return;
  if(!world[targetY][targetX]){world[targetY][targetX]={type:'stone',durability:3};stoneBlocks--; document.getElementById('stone').innerText=stoneBlocks;}
}

// Break block
function breakBlock(){
  let targetX=Math.floor(player.x + (player.facing>0?1:-1));
  let targetY=Math.floor(player.y);
  if(targetX<0||targetX>=WORLD_WIDTH||targetY<0||targetY>=WORLD_HEIGHT) return;
  if(world[targetY][targetX]){
    world[targetY][targetX]=null; // remove block
    stoneBlocks++; // add to inventory
    document.getElementById('stone').innerText=stoneBlocks;
  }
}
</script>
</body>
</html>
